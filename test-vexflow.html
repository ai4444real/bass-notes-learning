<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VexFlow Test - Bass Clef Octaves</title>
    <script src="https://cdn.jsdelivr.net/npm/vexflow@4.2.2/build/cjs/vexflow.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 20px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        h1 {
            text-align: center;
            color: #333;
        }
        .test-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-top: 30px;
        }
        .test-item {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-label {
            font-size: 18px;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
            text-align: center;
        }
        .test-description {
            font-size: 14px;
            color: #666;
            text-align: center;
            margin-bottom: 15px;
        }
        .staff-container {
            min-height: 200px;
        }
        .instructions {
            background: #fff3cd;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #ffc107;
        }
        .instructions h2 {
            margin-top: 0;
            color: #856404;
        }
    </style>
</head>
<body>
    <h1>ðŸŽ¸ Test VexFlow - Trova l'Ottava Corretta per Bass Clef</h1>

    <div class="instructions">
        <h2>ðŸ“‹ Istruzioni</h2>
        <p><strong>Obiettivo:</strong> Confronta queste visualizzazioni con la tua "bibbia" (Screenshot 2025-12-11 152638.png e 184737.png)</p>
        <p><strong>Domanda:</strong> Quale versione di <strong>E1</strong> corrisponde alla posizione corretta (spazio sotto il pentagramma)?</p>
        <p><strong>E quale versione di C2</strong> corrisponde alla posizione tra 2a e 3a riga?</p>
    </div>

    <div class="test-grid">
        <!-- Test E1 con diverse ottave in VexFlow -->
        <div class="test-item">
            <div class="test-label">E1 â†’ VexFlow: e/1</div>
            <div class="test-description">E nell'ottava 1 (default)</div>
            <div id="staff-e1-v1" class="staff-container"></div>
        </div>

        <div class="test-item">
            <div class="test-label">E1 â†’ VexFlow: e/2</div>
            <div class="test-description">E nell'ottava 2 (+1 ottava)</div>
            <div id="staff-e1-v2" class="staff-container"></div>
        </div>

        <div class="test-item">
            <div class="test-label">E1 â†’ VexFlow: e/3</div>
            <div class="test-description">E nell'ottava 3 (+2 ottave)</div>
            <div id="staff-e1-v3" class="staff-container"></div>
        </div>

        <div class="test-item">
            <div class="test-label">E1 â†’ VexFlow: e/4</div>
            <div class="test-description">E nell'ottava 4 (+3 ottave)</div>
            <div id="staff-e1-v4" class="staff-container"></div>
        </div>

        <!-- Test C2 con diverse ottave -->
        <div class="test-item">
            <div class="test-label">C2 â†’ VexFlow: c/2</div>
            <div class="test-description">C nell'ottava 2 (default)</div>
            <div id="staff-c2-v2" class="staff-container"></div>
        </div>

        <div class="test-item">
            <div class="test-label">C2 â†’ VexFlow: c/3</div>
            <div class="test-description">C nell'ottava 3 (+1 ottava)</div>
            <div id="staff-c2-v3" class="staff-container"></div>
        </div>

        <div class="test-item">
            <div class="test-label">C2 â†’ VexFlow: c/4</div>
            <div class="test-description">C nell'ottava 4 (+2 ottave)</div>
            <div id="staff-c2-v4" class="staff-container"></div>
        </div>

        <div class="test-item">
            <div class="test-label">C2 â†’ VexFlow: c/5</div>
            <div class="test-description">C nell'ottava 5 (+3 ottave)</div>
            <div id="staff-c2-v5" class="staff-container"></div>
        </div>
    </div>

    <script>
        const VF = Vex.Flow;

        function renderNote(containerId, noteKey) {
            const container = document.getElementById(containerId);

            const renderer = new VF.Renderer(container, VF.Renderer.Backends.SVG);
            renderer.resize(400, 200);
            const context = renderer.getContext();

            const stave = new VF.Stave(10, 40, 350);
            stave.addClef('bass').addTimeSignature('4/4');
            stave.setContext(context).draw();

            const notes = [
                new VF.StaveNote({
                    keys: [noteKey],
                    duration: 'w'
                })
            ];

            const voice = new VF.Voice({ num_beats: 4, beat_value: 4 });
            voice.addTickables(notes);

            new VF.Formatter()
                .joinVoices([voice])
                .format([voice], 300);

            voice.draw(context, stave);
        }

        // Render tutti i test
        renderNote('staff-e1-v1', 'e/1');
        renderNote('staff-e1-v2', 'e/2');
        renderNote('staff-e1-v3', 'e/3');
        renderNote('staff-e1-v4', 'e/4');

        renderNote('staff-c2-v2', 'c/2');
        renderNote('staff-c2-v3', 'c/3');
        renderNote('staff-c2-v4', 'c/4');
        renderNote('staff-c2-v5', 'c/5');
    </script>
</body>
</html>
